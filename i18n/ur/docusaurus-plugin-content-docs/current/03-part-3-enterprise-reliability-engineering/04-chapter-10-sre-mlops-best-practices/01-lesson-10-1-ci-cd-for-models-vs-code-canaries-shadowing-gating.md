---
id: 01-lesson-10-1-ci-cd-for-models-vs-code-canaries-shadowing-gating
title: "ماڈلز کے لیے CI/CD: کینریز، شیڈونگ، اور گیٹنگ"
sidebar_label: "ماڈلز کے لیے CI/CD: کینریز، شیڈونگ، اور گیٹنگ"
---

# ماڈلز کے لیے CI/CD: کینریز، شیڈونگ، اور گیٹنگ

لارج لینگویج ماڈلز کو مسلسل انضمام اور تعیناتی (CI/CD) پائپ لائن میں شامل کرنا انوکھے چیلنجز پیش کرتا ہے۔ کوڈ کے برعکس، جو کہ حتمی (deterministic) ہوتا ہے (ایک ہی لائن ہمیشہ ایک ہی کام کرتی ہے)، ماڈلز امکانی (probabilistic) اور غیر واضح ہوتے ہیں۔ ماڈل میں تبدیلی کو ضم کرنا کسی بائنری فائل کو مرتب کرنے کے بجائے کسی نئے ملازم کی خدمات حاصل کرنے جیسا ہے۔ ہمیں پورے اعتماد کے ساتھ تعیناتی کے لیے مضبوط "ModelOps" پیٹرنز کی ضرورت ہے۔

## تعیناتی پائپ لائن کے مراحل

ایک پختہ ModelOps پائپ لائن میں مخصوص رکاوٹیں (gates) ہوتی ہیں جن سے ماڈل کے ہر نئے ورژن کو گزرنا پڑتا ہے۔

1.  **بلڈ اور ٹیسٹ (CI کا مرحلہ):** ماڈل ویٹس کو ایک کنٹینر میں پیک کیا جاتا ہے۔ ریپ کوڈ (wrapper code) پر یونٹ ٹیسٹ چلائے جاتے ہیں، اور ماڈل پر "سموک ٹیسٹ" (smoke tests) کیے جاتے ہیں (مثلاً کیا یہ لوڈ ہو رہا ہے؟ کیا یہ "ہیلو" کا جواب دے رہا ہے؟)۔
2.  **تشخیص (کوالٹی گیٹ):** ماڈل کو "گولڈن ڈیٹا سیٹ" (ہزاروں سوال و جواب کے جوڑے) پر آزمایا جاتا ہے۔ یہ جوابات تیار کرتا ہے، اور ایک خودکار جج ماڈل انہیں اسکور دیتا ہے۔
    *   **گیٹ:** اگر موجودہ پروڈکشن ماڈل کے مقابلے میں اسکور 1% سے زیادہ گر جائے، تو پائپ لائن **ناکام** ہو جاتی ہے۔ یہ تعیناتی کارکردگی میں گراوٹ (regression) کو روکنے کے لیے سرکٹ بریکر کے طور پر کام کرتی ہے۔
3.  **شیڈو تعیناتی (Shadow Deployment):** اگر ماڈل کامیاب ہو جائے، تو اسے پروڈکشن میں نافذ کیا جاتا ہے لیکن اسے صرف "شیڈو ٹریفک" ملتی ہے۔ یہ براہ راست صارف کے سوالات کے جوابات تو دیتا ہے، لیکن اس کے جوابات لاگ کیے جاتے ہیں، صارفین کو دکھائے نہیں جاتے۔ اس سے حقیقی بوجھ کے تحت ماڈل کی رفتار اور استحکام کی جانچ ہوتی ہے۔
4.  **کینری رول آؤٹ (Gradual Release):** ماڈل کو 1% لائیو صارفین کے لیے کھولا جاتا ہے۔ ایک گھنٹے تک سروس کی کڑی نگرانی کی جاتی ہے۔ اگر سب ٹھیک رہے، تو اسے 10%، 50% اور پھر 100% تک بڑھا دیا جاتا ہے۔

## کینری (Canary) بمقابلہ بلیو/گرین

*   **بلیو/گرین (Blue/Green):** آپ پرانے کلسٹر (بلیو) کے ساتھ ایک نیا مکمل کلسٹر (گرین) چلاتے ہیں۔ آپ فوری طور پر ٹریفک کو ایک سے دوسرے پر منتقل کر دیتے ہیں۔ یہ فوری واپسی (rollback) کے لیے محفوظ ہے لیکن تھوڑی دیر کے لیے اخراجات دگنے کر دیتا ہے۔
*   **کینری:** آپ ایک ایک کر کے سرورز کو بدلتے ہیں۔ یہ سستا ہے لیکن سست عمل ہے۔ اے آئی ماڈلز کے لیے کینری طریقہ کار بہتر ہے—اگر پہلے 1% صارفین رپورٹ کریں کہ "یہ بوٹ بدتمیزی کر رہا ہے،" تو باقی 99% کے متاثر ہونے سے پہلے تعیناتی خود بخود رک جاتی ہے۔

## ماڈل کنفیگریشن بطور کوڈ

کبھی بھی یو آئی کنسول میں ماڈل کی سیٹنگ تبدیل نہ کریں۔

*   **پیرامیٹرز بطور کنفیگ:** ٹمپریچر (Temperature)، ٹاپ پی (Top_P) اور سسٹم پرومپٹس کو Git ریپوزٹریز (YAML/JSON) میں محفوظ ہونا چاہیے۔
*   **پرومپٹس کے لیے ورژن کنٹرول:** "سسٹم پرومپٹ" (وہ ہدایات جو اے آئی کو بتاتی ہیں کہ اسے کیسا سلوک کرنا چاہیے) دراصل کوڈ ہی ہے۔ اس کا ورژن ہونا چاہیے اور اس میں ہونے والی تبدیلیوں کا ریکارڈ رکھا جانا چاہیے۔ پرومپٹ میں تبدیلی اسی طرح پوری CI/CD پائپ لائن کو متحرک کرے جیسے کوڈ میں ہونے والی تبدیلی کرتی ہے۔

## رول بیکس (Rollbacks)

کسی کام کو واپس کرنے (undo) کی صلاحیت اسے کرنے کی صلاحیت سے زیادہ اہم ہے۔

*   **بحالی کا اوسط وقت (MTTR):** پائپ لائن کا اہم ترین پیمانہ۔ آپ کتنی تیزی سے آخری معلوم درست حالت پر واپس جا سکتے ہیں؟ کنٹینرائزڈ ماحول میں اسے سیکنڈوں میں ہونا چاہیے۔
*   **پیننگ (Pinning):** اہم ایپلی کیشنز کو "فلوٹنگ ٹیگز" (Floating tags - جیسے gpt-4-latest) کے بجائے ماڈل کے مخصوص ورژن (جیسے gpt-4-0613) کو مستقل استعمال کرنا چاہیے۔ فلوٹنگ ٹیگز بغیر کسی وارننگ کے بدل سکتے ہیں، جو راتوں رات آپ کی پرومپٹ انجینئرنگ کی محنت ضائع کر سکتے ہیں۔