---
id: 01-lesson-19-1-secure-apis-schema-contracts-and-capability-tokens
title: "محفوظ APIs، اسکیما کنٹریکٹس، اور کیپبلٹی ٹوکنز"
sidebar_label: "محفوظ APIs اور کنٹریکٹس"
---

# محفوظ APIs، اسکیما کنٹریکٹس، اور کیپبلٹی ٹوکنز

ایجنٹس APIs کے ذریعے دنیا سے رابطہ کرتے ہیں۔ اگر API میں کوئی خامی ہے، تو ایجنٹ ایک خطرہ بن جاتا ہے۔ ہمیں اس انٹرفیس کو مضبوط بنانا ہوگا۔

## اسکیما کنٹریکٹ (The Schema Contract)
ایجنٹس اکثر JSON فارمیٹس کا صحیح اندازہ لگانے میں غلطی کر دیتے ہیں۔
*   **اوپن اے پی آئی (OpenAPI) وضواحت:** ایجنٹ کے سامنے پیش کیے جانے والے ہر ٹول کی ایک واضح تعریف ہونی چاہیے۔ اس میں ڈیٹا کی اقسام (مثلاً نمبر یا تحریر) اور ان کی حدود متعین ہونی چاہئیں۔
*   **ٹائپ-سیف پارسنگ:** سسٹم کو صرف ایجنٹ کا آؤٹ پٹ براہِ راست نہیں لینا چاہیے، بلکہ اسے پہلے جانچنا چاہیے۔ اگر کوئی غلطی ہو، تو ایجنٹ کو پیغام ملے ("آپ نے عمر کے لیے لفظ بھیجا ہے، براہِ کرم نمبر بھیجیں") بجائے اس کے کہ پوری ایپ کریش ہو جائے۔

## کیپبلٹی ٹوکنز (The Keys to the Kingdom)
ہم ایجنٹ کی ہدایات (prompt) میں کبھی بھی اے پی آئی کیز (API keys) نہیں لکھتے۔
*   **ٹوکن کا اندراج:** جب ایجنٹ کو کوئی کام (مثلاً گوگل کیلنڈر کا استعمال) کرنا ہو، تو سسٹم خود بخود ایک عارضی ٹوکن اس میں شامل کر دیتا ہے۔
*   **محدود رسائی:** اس ٹوکن کے پاس صرف محدود اختیارات (Scopes) ہوتے ہیں۔ مثلاً صرف کیلنڈر پڑھنے کی اجازت۔ اگر ایجنٹ کوئی چیز ڈیلیٹ کرنے کی کوشش کرے تو سسٹم اسے روک دے گا، چاہے ایجنٹ "سوچے" کہ وہ ایسا کر سکتا ہے۔

## "انسانی منظوری" کا دائرہ کار
کچھ اقدامات کے لیے ایسے ٹوکن کی ضرورت ہوتی ہے جو صرف ایک انسان ہی دے سکتا ہے۔
*   **عمل:** ایجنٹ رقم منتقل کرنے کی کوشش کرتا ہے۔
*   **سسٹم:** "مجھے یہ کام مکمل کرنے کے لیے 2FA ٹوکن کی ضرورت ہے۔"
*   **ایجنٹ:** صارف سے پوچھتا ہے "براہِ کرم وہ کوڈ فراہم کریں جو آپ کے فون پر بھیجا گیا ہے۔"
*   **نتیجہ:** ایجنٹ اکیلے کچھ نہیں کر سکتا؛ جب تک انسان وہ خفیہ کوڈ فراہم نہ کرے، وہ کام نہیں ہو سکتا۔
